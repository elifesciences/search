#!/bin/bash

interrupt_fn() {
  set +e
  echo "Performing cleanup..."

  ps -p "$workerPid" > /dev/null
  if [ $? -eq 0 ]; then
    echo "Worker is still running. Terminating..."
    kill "$workerPid"
  fi

  ps -p "$queueWatchPid" > /dev/null
  if [ $? -eq 0 ]; then
    echo "Watcher is still running. Terminating..."
    kill "$queueWatchPid"
  fi
}

trap interrupt_fn EXIT
